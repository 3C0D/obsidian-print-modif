/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PrintPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// settings.ts
var import_obsidian = require("obsidian");
var PrintSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Print Plugin").setHeading();
    new import_obsidian.Setting(containerEl).setName("Print Note Title").setDesc("Include the note title in the printout.").addToggle((toggle) => toggle.setValue(this.plugin.settings.printTitle).onChange(async (value) => {
      this.plugin.settings.printTitle = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Direct Print").setDesc("Print documents directly using the default printer, bypassing the print modal.").addToggle((toggle) => toggle.setValue(this.plugin.settings.directPrint).onChange(async (value) => {
      this.plugin.settings.directPrint = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Font Size").setDesc("Set the font size for the printed note.").addText((text) => text.setPlaceholder("14px").setValue(this.plugin.settings.fontSize).onChange(async (value) => {
      this.plugin.settings.fontSize = value;
      await this.plugin.saveSettings();
    }));
    ["h1Size", "h2Size", "h3Size", "h4Size", "h5Size", "h6Size"].forEach((heading, index) => {
      new import_obsidian.Setting(containerEl).setName(`Heading ${index + 1} Size`).setDesc(`Set the size for <h${index + 1}> elements.`).addText((text) => text.setPlaceholder(`${this.plugin.settings[heading]}`).setValue(this.plugin.settings[heading]).onChange(async (value) => {
        this.plugin.settings[heading] = value;
        await this.plugin.saveSettings();
      }));
    });
    new import_obsidian.Setting(containerEl).setName("Debug Mode").setDesc("Enable debug mode. This will open the print window for inspection.").addToggle((toggle) => toggle.setValue(this.plugin.settings.debugMode).onChange(async (value) => {
      this.plugin.settings.debugMode = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Custom CSS").setDesc("Add custom CSS for the printout.").addTextArea((textarea) => textarea.setPlaceholder("Enter your custom CSS here").setValue(this.plugin.settings.customCSS || "").onChange(async (value) => {
      this.plugin.settings.customCSS = value;
      await this.plugin.saveSettings();
    }));
  }
};

// types.ts
var DEFAULT_SETTINGS = {
  printTitle: true,
  directPrint: false,
  fontSize: "14px",
  h1Size: "20px",
  h2Size: "18px",
  h3Size: "16px",
  h4Size: "14px",
  h5Size: "14px",
  h6Size: "12px",
  debugMode: false,
  customCSS: ""
};

// printModal.ts
async function openPrintModal(content, settings) {
  return new Promise((resolve) => {
    const { remote } = window.require("electron");
    let printWindow = new remote.BrowserWindow({
      width: 800,
      height: 600,
      show: settings.debugMode,
      webPreferences: {
        nodeIntegration: true,
        contextIsolation: false
      }
    });
    const htmlContent = `
            <html>
                <head>
                    <title>Print Note</title>
                    <style>
                        body { 
                            font-family: sans-serif; 
                            margin: 20px; 
                            font-size: ${settings.fontSize};
                        }
                        .markdown-preview-sizer {
                            min-height: 0 !important;
                            padding: 0 !important;
                        }
                        h1, .inline-title { font-size: ${settings.h1Size}; font-weight: bold; }
                        h2 { font-size: ${settings.h2Size}; }
                        h3 { font-size: ${settings.h3Size}; }
                        h4 { font-size: ${settings.h4Size}; }
                        h5 { font-size: ${settings.h5Size}; }
                        h6 { font-size: ${settings.h6Size}; }
                        .collapse-indicator { display: none; }
                        .metadata-container { display: none; }
                        ${settings.customCSS || ""}
                    </style>
                </head>
                <body class="obsidian-print">${content}</body>
            </html>
        `;
    printWindow.loadURL(`data:text/html;charset=utf-8,${encodeURIComponent(htmlContent)}`);
    printWindow.webContents.on("did-finish-load", () => {
      if (settings.debugMode) {
        printWindow.webContents.openDevTools();
      }
      printWindow.webContents.print({
        silent: settings.directPrint,
        printBackground: true
      }, (success, failureReason) => {
        if (!settings.debugMode) {
          printWindow.close();
        }
        if (settings.debugMode) {
          console.log(success, failureReason);
        }
        resolve();
      });
    });
  });
}

// main.ts
var PrintPlugin = class extends import_obsidian2.Plugin {
  async onload() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.addCommand({
      id: "print-note",
      name: "Print Current Note",
      callback: () => this.printNote()
    });
    this.addSettingTab(new PrintSettingTab(this.app, this));
    this.addRibbonIcon("printer", "Print Note", (evt) => {
      this.printNote();
    });
  }
  async printNote() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
    if (!activeView) {
      new import_obsidian2.Notice("No active note to print.");
      return;
    }
    if (activeView.getMode() !== "preview") {
      new import_obsidian2.Notice("Please open the reading view first.");
      return;
    }
    const content = activeView.contentEl.querySelector(".markdown-reading-view");
    if (!content) {
      new import_obsidian2.Notice("Failed to retrieve note content.");
      return;
    }
    const printContent = content.cloneNode(true);
    const titleElement = printContent.querySelector(".inline-title");
    if (!this.settings.printTitle && titleElement) {
      titleElement.remove();
    }
    await openPrintModal(printContent.innerHTML, this.settings);
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzZXR0aW5ncy50cyIsICJ0eXBlcy50cyIsICJwcmludE1vZGFsLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIEFwcCwgTWFya2Rvd25WaWV3LCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBQcmludFNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IFByaW50UGx1Z2luU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IG9wZW5QcmludE1vZGFsIH0gZnJvbSAnLi9wcmludE1vZGFsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJpbnRQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHNldHRpbmdzOiBQcmludFBsdWdpblNldHRpbmdzO1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAncHJpbnQtbm90ZScsXG4gICAgICAgICAgICBuYW1lOiAnUHJpbnQgQ3VycmVudCBOb3RlJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLnByaW50Tm90ZSgpLFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFByaW50U2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbigncHJpbnRlcicsICdQcmludCBOb3RlJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcmludE5vdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgcHJpbnROb3RlKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblxuICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBub3RlIHRvIHByaW50LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcuZ2V0TW9kZSgpICE9PSAncHJldmlldycpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BsZWFzZSBvcGVuIHRoZSByZWFkaW5nIHZpZXcgZmlyc3QuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50ID0gYWN0aXZlVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLm1hcmtkb3duLXJlYWRpbmctdmlldycpO1xuICAgICAgICBpZiAoIWNvbnRlbnQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byByZXRyaWV2ZSBub3RlIGNvbnRlbnQuJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmludENvbnRlbnQgPSBjb250ZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgdGl0bGVFbGVtZW50ID0gcHJpbnRDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmxpbmUtdGl0bGUnKTtcblxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MucHJpbnRUaXRsZSAmJiB0aXRsZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRpdGxlRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGF3YWl0IG9wZW5QcmludE1vZGFsKHByaW50Q29udGVudC5pbm5lckhUTUwsIHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG59IiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBQcmludFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY2xhc3MgUHJpbnRTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBQcmludFBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFByaW50UGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5zZXROYW1lKCdQcmludCBQbHVnaW4nKS5zZXRIZWFkaW5nKCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnUHJpbnQgTm90ZSBUaXRsZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnSW5jbHVkZSB0aGUgbm90ZSB0aXRsZSBpbiB0aGUgcHJpbnRvdXQuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmludFRpdGxlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJpbnRUaXRsZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGlyZWN0IFByaW50JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdQcmludCBkb2N1bWVudHMgZGlyZWN0bHkgdXNpbmcgdGhlIGRlZmF1bHQgcHJpbnRlciwgYnlwYXNzaW5nIHRoZSBwcmludCBtb2RhbC4nKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpcmVjdFByaW50KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlyZWN0UHJpbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ZvbnQgU2l6ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBmb250IHNpemUgZm9yIHRoZSBwcmludGVkIG5vdGUuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignMTRweCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmZvbnRTaXplKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9udFNpemUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIFsnaDFTaXplJywgJ2gyU2l6ZScsICdoM1NpemUnLCAnaDRTaXplJywgJ2g1U2l6ZScsICdoNlNpemUnXS5mb3JFYWNoKChoZWFkaW5nLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoYEhlYWRpbmcgJHtpbmRleCArIDF9IFNpemVgKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKGBTZXQgdGhlIHNpemUgZm9yIDxoJHtpbmRleCArIDF9PiBlbGVtZW50cy5gKVxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3NbaGVhZGluZ119YClcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzW2hlYWRpbmddKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5nc1toZWFkaW5nXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGVidWcgTW9kZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIGRlYnVnIG1vZGUuIFRoaXMgd2lsbCBvcGVuIHRoZSBwcmludCB3aW5kb3cgZm9yIGluc3BlY3Rpb24uJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z01vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0N1c3RvbSBDU1MnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCBjdXN0b20gQ1NTIGZvciB0aGUgcHJpbnRvdXQuJylcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0YXJlYSA9PiB0ZXh0YXJlYVxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBjdXN0b20gQ1NTIGhlcmUnKVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21DU1MgfHwgJycpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21DU1MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cbn0iLCAiZXhwb3J0IGludGVyZmFjZSBQcmludFBsdWdpblNldHRpbmdzIHtcbiAgICBwcmludFRpdGxlOiBib29sZWFuO1xuICAgIGRpcmVjdFByaW50OiBib29sZWFuO1xuICAgIGZvbnRTaXplOiBzdHJpbmc7XG4gICAgaDFTaXplOiBzdHJpbmc7XG4gICAgaDJTaXplOiBzdHJpbmc7XG4gICAgaDNTaXplOiBzdHJpbmc7XG4gICAgaDRTaXplOiBzdHJpbmc7XG4gICAgaDVTaXplOiBzdHJpbmc7XG4gICAgaDZTaXplOiBzdHJpbmc7XG4gICAgZGVidWdNb2RlOiBib29sZWFuO1xuICAgIGN1c3RvbUNTUzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUHJpbnRQbHVnaW5TZXR0aW5ncyA9IHtcbiAgICBwcmludFRpdGxlOiB0cnVlLFxuICAgIGRpcmVjdFByaW50OiBmYWxzZSxcbiAgICBmb250U2l6ZTogJzE0cHgnLFxuICAgIGgxU2l6ZTogJzIwcHgnLFxuICAgIGgyU2l6ZTogJzE4cHgnLFxuICAgIGgzU2l6ZTogJzE2cHgnLFxuICAgIGg0U2l6ZTogJzE0cHgnLFxuICAgIGg1U2l6ZTogJzE0cHgnLFxuICAgIGg2U2l6ZTogJzEycHgnLFxuICAgIGRlYnVnTW9kZTogZmFsc2UsXG4gICAgY3VzdG9tQ1NTOiAnJ1xufTsiLCAiaW1wb3J0IHsgUHJpbnRQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb3BlblByaW50TW9kYWwoY29udGVudDogc3RyaW5nLCBzZXR0aW5nczogUHJpbnRQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICBjb25zdCB7IHJlbW90ZSB9ID0gKHdpbmRvdyBhcyBhbnkpLnJlcXVpcmUoXCJlbGVjdHJvblwiKTtcblxuICAgICAgICBsZXQgcHJpbnRXaW5kb3cgPSBuZXcgcmVtb3RlLkJyb3dzZXJXaW5kb3coe1xuICAgICAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgICAgIGhlaWdodDogNjAwLFxuICAgICAgICAgICAgc2hvdzogc2V0dGluZ3MuZGVidWdNb2RlLFxuICAgICAgICAgICAgd2ViUHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWUsXG4gICAgICAgICAgICAgICAgY29udGV4dElzb2xhdGlvbjogZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaHRtbENvbnRlbnQgPSBgXG4gICAgICAgICAgICA8aHRtbD5cbiAgICAgICAgICAgICAgICA8aGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlByaW50IE5vdGU8L3RpdGxlPlxuICAgICAgICAgICAgICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5IHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMjBweDsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAke3NldHRpbmdzLmZvbnRTaXplfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5tYXJrZG93bi1wcmV2aWV3LXNpemVyIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAwICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaDEsIC5pbmxpbmUtdGl0bGUgeyBmb250LXNpemU6ICR7c2V0dGluZ3MuaDFTaXplfTsgZm9udC13ZWlnaHQ6IGJvbGQ7IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGgyIHsgZm9udC1zaXplOiAke3NldHRpbmdzLmgyU2l6ZX07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGgzIHsgZm9udC1zaXplOiAke3NldHRpbmdzLmgzU2l6ZX07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGg0IHsgZm9udC1zaXplOiAke3NldHRpbmdzLmg0U2l6ZX07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGg1IHsgZm9udC1zaXplOiAke3NldHRpbmdzLmg1U2l6ZX07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGg2IHsgZm9udC1zaXplOiAke3NldHRpbmdzLmg2U2l6ZX07IH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsYXBzZS1pbmRpY2F0b3IgeyBkaXNwbGF5OiBub25lOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICAubWV0YWRhdGEtY29udGFpbmVyIHsgZGlzcGxheTogbm9uZTsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJHtzZXR0aW5ncy5jdXN0b21DU1MgfHwgJyd9XG4gICAgICAgICAgICAgICAgICAgIDwvc3R5bGU+XG4gICAgICAgICAgICAgICAgPC9oZWFkPlxuICAgICAgICAgICAgICAgIDxib2R5IGNsYXNzPVwib2JzaWRpYW4tcHJpbnRcIj4ke2NvbnRlbnR9PC9ib2R5PlxuICAgICAgICAgICAgPC9odG1sPlxuICAgICAgICBgO1xuXG4gICAgICAgIHByaW50V2luZG93LmxvYWRVUkwoYGRhdGE6dGV4dC9odG1sO2NoYXJzZXQ9dXRmLTgsJHtlbmNvZGVVUklDb21wb25lbnQoaHRtbENvbnRlbnQpfWApO1xuXG4gICAgICAgIHByaW50V2luZG93LndlYkNvbnRlbnRzLm9uKCdkaWQtZmluaXNoLWxvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgICAgICAgcHJpbnRXaW5kb3cud2ViQ29udGVudHMub3BlbkRldlRvb2xzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByaW50V2luZG93LndlYkNvbnRlbnRzLnByaW50KHtcbiAgICAgICAgICAgICAgICBzaWxlbnQ6IHNldHRpbmdzLmRpcmVjdFByaW50LFxuICAgICAgICAgICAgICAgIHByaW50QmFja2dyb3VuZDogdHJ1ZVxuICAgICAgICAgICAgfSwgKHN1Y2Nlc3M6IGJvb2xlYW4sIGZhaWx1cmVSZWFzb246IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3MuZGVidWdNb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaW50V2luZG93LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmRlYnVnTW9kZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdWNjZXNzLCBmYWlsdXJlUmVhc29uKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59Il0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUFvRTs7O0FDQXBFLHNCQUErQztBQUd4QyxJQUFNLGtCQUFOLGNBQThCLGlDQUFpQjtBQUFBLEVBR2xELFlBQVksS0FBVSxRQUFxQjtBQUN2QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNsQjtBQUFBLEVBRUEsVUFBZ0I7QUFDWixVQUFNLEVBQUUsZ0JBQWdCO0FBRXhCLGdCQUFZLE1BQU07QUFFbEIsUUFBSSx3QkFBUSxXQUFXLEVBQUUsUUFBUSxjQUFjLEVBQUUsV0FBVztBQUU1RCxRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxrQkFBa0IsRUFDMUIsUUFBUSx5Q0FBeUMsRUFDakQsVUFBVSxZQUFVLE9BQ2hCLFNBQVMsS0FBSyxPQUFPLFNBQVMsVUFBVSxFQUN4QyxTQUFTLE9BQU8sVUFBVTtBQUN2QixXQUFLLE9BQU8sU0FB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
